# reviewer-assignment

## 使い方

1. 以下の3ファイルを記入します。

* `presentations.csv` (審査対象講演リスト)
* `reviewers.csv` (審査員リスト)
* `sessions.csv` (セッション番号対応表)

2. 以下のコマンドを実行します。

```
$ php ./assign.php　> log.txt
```

3. `log.txt`に割り当て経過・結果に関する情報、`assignments.csv`に講演に対する審査員の対応表、`reviewer_status.csv`に審査員に対する講演の対応表が出力されます。


## パラメータ

`assign.php` の先頭部分などに設定可能なパラメータが定義されています。

### 割り当てパラメータ

```
$rev_per_presen = 2; // 一発表あたりの審査員数
$presen_per_rev = 6; // 審査員あたりの最大割当数
$max_slots = 2; // 審査員あたりの担当スロット数
$rev_per_slot = 10; // 一審査員、一スロットあたりの最大審査数
```

### ピンチヒッター抽出パラメータ (ファイル中盤で定義)

```
$pinch_hitter_cat_req = count($cat_from_id) - 9;
```
この値より多く、希望カテゴリをチェックしており、全日程参加可能な方を、ピンチヒッターとして抽出します。


## アルゴリズム

* ヒューリスティック付きの貪欲法で割り当てを行います。カテゴリを希望する審査員が少なく、担当可能な時間帯が少ない審査員から優先的に、なるべく同じスロットに割り当てられるように対応付けを行います。
* 審査員の希望カテゴリ、審査不可時間帯を考慮し、著者リストに審査員が含まれない講演の中から、パラメータの数値に従って自動で割り当てを行います。
* 割り振った後で残った講演については、希望カテゴリを無視して追加で割り当てを行います。


## 備考・TODO

* 同研究室の別教員など、著者リストでは直接に検出できない利害関係者を振ってしまう場合がある。 (対応策：共通の著者を持つ方を割り当てない)
* 審査員の発表セッションに、審査を割り振ってしまう場合がある。 (対応策：依頼時に確認してもらう/講演リストから自動で検出する)
* 自動割り当て後の手動変更が面倒、かつ、整合性チェックが行いにくい。 (対応策：UIを作成する/SQL等で入力データと出力データを統一的に管理する)

